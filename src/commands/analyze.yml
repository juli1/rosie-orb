description: >
  This command analyzes the code and upload results to DataDog.
parameters:
  dd_app_key:
    description: DataDog App Key
    default: DD_APP_KEY
    type: string
  dd_api_key:
    description: DataDog API Key
    default: DD_API_KEY
    type: string
  dd_env:
    description: DataDog environment key
    default: DD_ENV
    type: string
  dd_service:
    description: DataDog service
    default: DD_SERVICE
    type: string
  dd_site:
    description: DataDog site
    default: DD_SITE
    type: string
steps:
  - run:
      environment:
        DD_APP_KEY: <<parameters.dd_app_key>>
        DD_API_KEY: <<parameters.dd_api_key>>
        DD_ENV: <<parameters.dd_env>>
        DD_SERVICE: <<parameters.dd_service>>
        DD_SITE: <<parameters.dd_site>>
      name: Datadog analysis
      command: <<include(scripts/analyze.sh)>>
